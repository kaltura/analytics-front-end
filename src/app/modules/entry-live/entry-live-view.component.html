<div data-aid="report-group-entry" class="kMain">
  <k-area-blocker [showLoader]="_isBusy" [message]="_blockerMessage">
    <div class="kReportView">
      <div *ngIf="_entry" class="kReport kContent kOverrideFAIcons">
        <div class="kReportHeader" *ngIf="_entryLiveViewConfig.header">
          <button pButton class="kButtonDefault kBackBtn small" icon="kIconarrow_backward" (click)="_back()"
                  [kTooltip]="'app.entryLive.back' | translate" [placement]="'bottom'"></button>
          <span class="kTitle">{{_entry?.name}}</span>
          <div class="kControls">
            <app-toggle-users-mode (modeChanges)="_onUsersModeChange()" *ngIf="_entryLiveViewConfig.userMode"></app-toggle-users-mode>
            <app-export-csv *ngIf="_entryLiveViewConfig.export"
                            name="entry"
                            [width]="380"
                            [reports]="_exportConfig"
                            [entryId]="_entryId"></app-export-csv>
            <app-toggle-live-btn *ngIf="_canShowToggleLive"
                                 [entry]="_entry"
                                 (entryToggled)="_liveToggled()"></app-toggle-live-btn>
          </div>
        </div>

        <app-entry-details *ngIf="_entryLiveViewConfig.details"
                           [entry]="_entry" (navigateToEntry)="_navigateToEntry()"></app-entry-details>
        <div class="kEntryWidgets">
          <div class="kWideColumn" *ngIf="_entryLiveViewConfig.users || _entryLiveViewConfig.bandwidth">
            <app-live-users [entry]="_entry" *ngIf="_entryLiveViewConfig.users"></app-live-users>
            <app-live-bandwidth [entry]="_entry" *ngIf="_entryLiveViewConfig.bandwidth"></app-live-bandwidth>
          </div>
          <div class="kNarrowColumn" *ngIf="_entryLiveViewConfig.status || _entryLiveViewConfig.player || _entryLiveViewConfig.streamHealth">
            <div class="kPreview">
              <app-live-status [entry]="_entry" *ngIf="_entryLiveViewConfig.status"></app-live-status>
              <app-live-player [entryId]="_entry?.id" *ngIf="_entryLiveViewConfig.player"></app-live-player>
            </div>
            <app-live-stream-health *ngIf="_entryLiveViewConfig.streamHealth"></app-live-stream-health>
          </div>
        </div>

        <div class="kFilters kLiveFilters kOverrideFAIcons" *ngIf="_entryLiveViewConfig.geo || _entryLiveViewConfig.devices || _entryLiveViewConfig.discovery">
          <span class="kTitle">{{'app.entryLive.discovery.title' | translate}}</span>

          <app-time-selector [dateRange]="_selectedDateRange" (filterChange)="_onDateFilterChange($event)"></app-time-selector>

        </div>
        <div class="kEntryWidgets" *ngIf="_entryLiveViewConfig.deo || _entryLiveViewConfig.devices">
          <div class="kWideColumn" *ngIf="_entryLiveViewConfig.geo">
            <div class="kReport kNoBottomMargin">
              <app-live-geo (onDrillDown)="_onGeoDrilldown($event)"></app-live-geo>
            </div>
          </div>
          <div class="kNarrowColumn" *ngIf="_entryLiveViewConfig.devices">
            <div class="kReport kNoBottomMargin">
              <app-live-devices></app-live-devices>
            </div>
          </div>
        </div>
        <div *ngIf="_entryLiveViewConfig.discovery" class="kReport">
          <app-live-discovery (tableChange)="_onTableModeChange($event)"
                              (dateFilterChange)="_onDiscoveryDateFilterChange($event)"></app-live-discovery>
        </div>
      </div>
    </div>
  </k-area-blocker>
</div>
