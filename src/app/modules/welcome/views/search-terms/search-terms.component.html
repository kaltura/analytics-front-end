<div data-aid="report-mini-top-videos" class="kReport kOverrideFAIcons">
  <div class="kFilters">
    <span class="kTitle">Top search terms in the last 2 weeks</span>
  </div>
  <div class="kReportContent">
    <k-area-blocker [showLoader]="_loading" [message]="_blockerMessage">
      <div class="divider">
        <div class="chart">
          <div class="header">

            <svg width="66" height="34" viewBox="0 0 66 34" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="!_showTable" (click)="_showTable=true" [ngStyle]="{'opacity': _searchTermsLoaded ? 1 : 0.2}">
              <path d="M1 5C1 2.79086 2.79086 1 5 1H33V33H5C2.79086 33 1 31.2091 1 29V5Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 12.5C11.3284 12.5 12 11.8284 12 11C12 10.1716 11.3284 9.5 10.5 9.5C9.67157 9.5 9 10.1716 9 11C9 11.8284 9.67157 12.5 10.5 12.5ZM14 11C14 10.4477 14.4477 10 15 10H24C24.5523 10 25 10.4477 25 11C25 11.5523 24.5523 12 24 12H15C14.4477 12 14 11.5523 14 11ZM14 17C14 16.4477 14.4477 16 15 16H24C24.5523 16 25 16.4477 25 17C25 17.5523 24.5523 18 24 18H15C14.4477 18 14 17.5523 14 17ZM14 23C14 22.4477 14.4477 22 15 22H24C24.5523 22 25 22.4477 25 23C25 23.5523 24.5523 24 24 24H15C14.4477 24 14 23.5523 14 23ZM12 17C12 17.8284 11.3284 18.5 10.5 18.5C9.67157 18.5 9 17.8284 9 17C9 16.1716 9.67157 15.5 10.5 15.5C11.3284 15.5 12 16.1716 12 17ZM10.5 24.5C11.3284 24.5 12 23.8284 12 23C12 22.1716 11.3284 21.5 10.5 21.5C9.67157 21.5 9 22.1716 9 23C9 23.8284 9.67157 24.5 10.5 24.5Z" fill="#888888"/>
              <path d="M1 5C1 2.79086 2.79086 1 5 1H33V33H5C2.79086 33 1 31.2091 1 29V5Z" stroke="#CCCCCC"/>
              <path d="M33 1H61C63.2091 1 65 2.79086 65 5V29C65 31.2091 63.2091 33 61 33H33V1Z" fill="#006EFA" fill-opacity="0.1"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M49 10C53.5455 10 57.4273 12.61 59 17C57.4273 21.39 53.5455 24 49 24C44.4545 24 40.5727 21.39 39 17C40.5727 12.61 44.4545 10 49 10ZM49 12C46.2444 12 44 14.2444 44 17C44 19.7556 46.2444 22 49 22C51.7556 22 54 19.7556 54 17C54 14.2444 51.7556 12 49 12ZM52 17C52 15.3467 50.6533 14 49 14C47.3467 14 46 15.3467 46 17C46 18.6533 47.3467 20 49 20C50.6533 20 52 18.6533 52 17Z" fill="#006EFA"/>
              <path d="M33 1H61C63.2091 1 65 2.79086 65 5V29C65 31.2091 63.2091 33 61 33H33V1Z" stroke="#006EFA"/>
            </svg>

            <svg width="66" height="34" viewBox="0 0 66 34" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="_showTable" (click)="_showTable=false" [ngStyle]="{'opacity': _searchTermsLoaded ? 1 : 0.2}">
              <path d="M33 1H61C63.2091 1 65 2.79086 65 5V29C65 31.2091 63.2091 33 61 33H33V1Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M49 10C53.5455 10 57.4273 12.61 59 17C57.4273 21.39 53.5455 24 49 24C44.4545 24 40.5727 21.39 39 17C40.5727 12.61 44.4545 10 49 10ZM49 12C46.2444 12 44 14.2444 44 17C44 19.7556 46.2444 22 49 22C51.7556 22 54 19.7556 54 17C54 14.2444 51.7556 12 49 12ZM52 17C52 15.3467 50.6533 14 49 14C47.3467 14 46 15.3467 46 17C46 18.6533 47.3467 20 49 20C50.6533 20 52 18.6533 52 17Z" fill="#888888"/>
              <path d="M33 1H61C63.2091 1 65 2.79086 65 5V29C65 31.2091 63.2091 33 61 33H33V1Z" stroke="#CCCCCC"/>
              <path d="M1 5C1 2.79086 2.79086 1 5 1H33V33H5C2.79086 33 1 31.2091 1 29V5Z" fill="#006EFA" fill-opacity="0.1"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 12.5C11.3284 12.5 12 11.8284 12 11C12 10.1716 11.3284 9.5 10.5 9.5C9.67157 9.5 9 10.1716 9 11C9 11.8284 9.67157 12.5 10.5 12.5ZM14 11C14 10.4477 14.4477 10 15 10H24C24.5523 10 25 10.4477 25 11C25 11.5523 24.5523 12 24 12H15C14.4477 12 14 11.5523 14 11ZM14 17C14 16.4477 14.4477 16 15 16H24C24.5523 16 25 16.4477 25 17C25 17.5523 24.5523 18 24 18H15C14.4477 18 14 17.5523 14 17ZM14 23C14 22.4477 14.4477 22 15 22H24C24.5523 22 25 22.4477 25 23C25 23.5523 24.5523 24 24 24H15C14.4477 24 14 23.5523 14 23ZM12 17C12 17.8284 11.3284 18.5 10.5 18.5C9.67157 18.5 9 17.8284 9 17C9 16.1716 9.67157 15.5 10.5 15.5C11.3284 15.5 12 16.1716 12 17ZM10.5 24.5C11.3284 24.5 12 23.8284 12 23C12 22.1716 11.3284 21.5 10.5 21.5C9.67157 21.5 9 22.1716 9 23C9 23.8284 9.67157 24.5 10.5 24.5Z" fill="#006EFA"/>
              <path d="M1 5C1 2.79086 2.79086 1 5 1H33V33H5C2.79086 33 1 31.2091 1 29V5Z" stroke="#006EFA"/>
            </svg>

            <svg width="91" height="34" viewBox="0 0 91 34" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: auto" (click)="exportChart()" [ngStyle]="{'opacity': _searchTermsLoaded ? 1 : 0.2}">
              <rect x="0.5" y="0.5" width="90" height="33" rx="3.5" fill="white"/>
              <path d="M21.7686 18.7663C20.7615 17.8756 19.8642 16.8384 19.1555 15.6449C18.5885 17.0215 17.8983 18.537 17.1875 19.9694C18.6277 19.4868 20.2334 19.0651 21.7686 18.7663ZM19.9613 11.2392C20.2022 9.93456 19.7508 9.24547 19.1741 9.22192C18.6106 9.1989 18.1406 9.84633 18.3146 11.2794C18.4333 12.2515 18.6893 13.1955 19.0797 14.0984C19.5404 12.8793 19.8367 11.9133 19.9613 11.2392ZM26.668 20.6782C28.1271 20.6782 28.2128 19.2575 26.5537 19.014C25.7745 18.9 24.6027 18.9674 23.2867 19.1587C24.5485 20.0681 25.8276 20.6782 26.668 20.6782ZM12.8721 22.8247C12.0985 23.5532 12.0688 24.2811 12.4689 24.6251C12.8698 24.9699 13.5934 24.7879 14.3927 23.6375C14.8216 23.0219 15.3253 22.1583 15.8711 21.1339C14.4568 21.706 13.4466 22.2821 12.8721 22.8247ZM15.1786 19.0184C15.845 17.6776 16.494 16.2586 17.0326 14.9632C16.5619 13.8704 16.2523 12.7258 16.1084 11.5477C15.7825 8.86265 17.1941 6.91808 19.2649 7.00266C21.3002 7.08578 22.6169 9.09593 22.1468 11.6424C21.9996 12.4386 21.6855 13.4754 21.2105 14.7456C21.7276 15.5627 22.361 16.2969 23.0674 16.946C24.5391 16.7364 25.8552 16.667 26.8761 16.8164C31.236 17.4563 30.9076 22.8994 26.668 22.8994C25.2451 22.8994 23.6142 22.1344 22.0154 20.9817C20.6259 21.2602 19.1795 21.6441 17.8859 22.078C17.2821 23.2171 16.7212 24.1823 16.2174 24.9054C14.7281 27.0489 12.5244 27.603 11.0193 26.3088C9.56675 25.0597 9.6587 22.7995 11.3462 21.2099C12.1756 20.4267 13.4562 19.7027 15.1786 19.0184Z" fill="black"/>
              <path d="M43.406 12.378V13.876H38.919V16.683H42.454V18.132H38.919V20.995H43.406V22.5H37.022V12.378H43.406ZM46.6367 18.797L44.2777 15.318H45.9437C46.0697 15.318 46.1631 15.3367 46.2237 15.374C46.2844 15.4067 46.3381 15.4627 46.3847 15.542L47.8897 17.943C47.9131 17.8637 47.9411 17.7843 47.9737 17.705C48.0111 17.6257 48.0554 17.5463 48.1067 17.467L49.3177 15.577C49.3737 15.4883 49.4321 15.423 49.4927 15.381C49.5534 15.339 49.6281 15.318 49.7167 15.318H51.3057L48.9397 18.72L51.4037 22.5H49.7377C49.6117 22.5 49.5091 22.4673 49.4297 22.402C49.3551 22.3367 49.2921 22.262 49.2407 22.178L47.7147 19.679C47.6727 19.847 47.6144 19.987 47.5397 20.099L46.1957 22.178C46.1444 22.2573 46.0814 22.332 46.0067 22.402C45.9321 22.4673 45.8387 22.5 45.7267 22.5H44.1797L46.6367 18.797ZM52.4963 24.845V15.318H53.5533C53.6653 15.318 53.7609 15.3437 53.8403 15.395C53.9196 15.4463 53.9709 15.5257 53.9943 15.633L54.1343 16.298C54.4236 15.9667 54.7549 15.6983 55.1283 15.493C55.5063 15.2877 55.9473 15.185 56.4513 15.185C56.8433 15.185 57.2003 15.2667 57.5223 15.43C57.8489 15.5933 58.1289 15.8313 58.3623 16.144C58.6003 16.452 58.7823 16.8347 58.9083 17.292C59.0389 17.7447 59.1043 18.265 59.1043 18.853C59.1043 19.3897 59.0319 19.8867 58.8873 20.344C58.7426 20.8013 58.5349 21.198 58.2643 21.534C57.9983 21.87 57.6739 22.1337 57.2913 22.325C56.9133 22.5117 56.4886 22.605 56.0173 22.605C55.6113 22.605 55.2659 22.5443 54.9813 22.423C54.7013 22.297 54.4493 22.1243 54.2253 21.905V24.845H52.4963ZM55.8563 16.55C55.4969 16.55 55.1889 16.627 54.9323 16.781C54.6803 16.9303 54.4446 17.1427 54.2253 17.418V20.638C54.4213 20.8807 54.6336 21.051 54.8623 21.149C55.0956 21.2423 55.3453 21.289 55.6113 21.289C55.8726 21.289 56.1083 21.24 56.3183 21.142C56.5329 21.044 56.7126 20.8947 56.8573 20.694C57.0066 20.4933 57.1209 20.2413 57.2003 19.938C57.2796 19.63 57.3193 19.2683 57.3193 18.853C57.3193 18.433 57.2843 18.0783 57.2143 17.789C57.1489 17.495 57.0533 17.257 56.9273 17.075C56.8013 16.893 56.6473 16.76 56.4653 16.676C56.2879 16.592 56.0849 16.55 55.8563 16.55ZM63.4783 15.206C64.0149 15.206 64.5003 15.2923 64.9343 15.465C65.3729 15.6377 65.7463 15.8827 66.0543 16.2C66.3623 16.5173 66.6003 16.9047 66.7683 17.362C66.9363 17.8193 67.0203 18.3303 67.0203 18.895C67.0203 19.4643 66.9363 19.9777 66.7683 20.435C66.6003 20.8923 66.3623 21.282 66.0543 21.604C65.7463 21.926 65.3729 22.1733 64.9343 22.346C64.5003 22.5187 64.0149 22.605 63.4783 22.605C62.9416 22.605 62.4539 22.5187 62.0153 22.346C61.5766 22.1733 61.2009 21.926 60.8883 21.604C60.5803 21.282 60.3399 20.8923 60.1673 20.435C59.9993 19.9777 59.9153 19.4643 59.9153 18.895C59.9153 18.3303 59.9993 17.8193 60.1673 17.362C60.3399 16.9047 60.5803 16.5173 60.8883 16.2C61.2009 15.8827 61.5766 15.6377 62.0153 15.465C62.4539 15.2923 62.9416 15.206 63.4783 15.206ZM63.4783 21.275C64.0756 21.275 64.5166 21.0743 64.8013 20.673C65.0906 20.2717 65.2353 19.6837 65.2353 18.909C65.2353 18.1343 65.0906 17.544 64.8013 17.138C64.5166 16.732 64.0756 16.529 63.4783 16.529C62.8716 16.529 62.4236 16.7343 62.1343 17.145C61.8449 17.551 61.7003 18.139 61.7003 18.909C61.7003 19.679 61.8449 20.267 62.1343 20.673C62.4236 21.0743 62.8716 21.275 63.4783 21.275ZM68.3693 22.5V15.318H69.3843C69.5616 15.318 69.6853 15.3507 69.7553 15.416C69.8253 15.4813 69.872 15.5933 69.8953 15.752L70.0003 16.62C70.257 16.1767 70.558 15.8267 70.9033 15.57C71.2486 15.3133 71.636 15.185 72.0653 15.185C72.42 15.185 72.714 15.2667 72.9473 15.43L72.7233 16.725C72.7093 16.809 72.679 16.8697 72.6323 16.907C72.5856 16.9397 72.5226 16.956 72.4433 16.956C72.3733 16.956 72.2776 16.9397 72.1563 16.907C72.035 16.8743 71.874 16.858 71.6733 16.858C71.314 16.858 71.006 16.9583 70.7493 17.159C70.4926 17.355 70.2756 17.6443 70.0983 18.027V22.5H68.3693ZM76.4432 22.612C75.8225 22.612 75.3442 22.437 75.0082 22.087C74.6722 21.7323 74.5042 21.2447 74.5042 20.624V16.613H73.7762C73.6828 16.613 73.6012 16.5827 73.5312 16.522C73.4658 16.4613 73.4332 16.3703 73.4332 16.249V15.563L74.5882 15.374L74.9522 13.414C74.9708 13.3207 75.0128 13.2483 75.0782 13.197C75.1482 13.1457 75.2345 13.12 75.3372 13.12H76.2332V15.381H78.1232V16.613H76.2332V20.505C76.2332 20.729 76.2892 20.904 76.4012 21.03C76.5132 21.156 76.6625 21.219 76.8492 21.219C76.9565 21.219 77.0452 21.2073 77.1152 21.184C77.1898 21.156 77.2528 21.128 77.3042 21.1C77.3602 21.072 77.4092 21.0463 77.4512 21.023C77.4932 20.995 77.5352 20.981 77.5772 20.981C77.6285 20.981 77.6705 20.995 77.7032 21.023C77.7358 21.0463 77.7708 21.0837 77.8082 21.135L78.3262 21.975C78.0742 22.185 77.7848 22.3437 77.4582 22.451C77.1315 22.5583 76.7932 22.612 76.4432 22.612Z" fill="#333333"/>
              <rect x="0.5" y="0.5" width="90" height="33" rx="3.5" stroke="#CCCCCC"/>
            </svg>

          </div>
          <div id="wordsCloud" [class.shown]="_searchTermsLoaded && !_showTable">
            <div class="cover"></div>
          </div>
          <div class="table" [class.shown]="_showTable">
            <p-table [value]="searchTerms">
              <ng-template pTemplate="header">
                <tr>
                  <th>Search Term</th>
                  <th  pSortableColumn="value">Count<p-sortIcon field="value"></p-sortIcon></th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-term>
                <tr>
                  <td>{{term.x}}</td>
                  <td>{{term.value}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>

        <div class="insights" *ngIf="!_loading">
          <div class="blueBkg">
            <img src="assets/images/ai.svg" *ngIf="!_aiLoading">
            <lottie-player autoplay loop mode="normal" src="assets/images/ai.json" style="width: 140px" *ngIf="_aiLoading"></lottie-player>
            <span class="aiTitle">AI Analysis</span>

            <div class="aiResponse"*ngIf="!_showTrends && _categories.length && !_aiLoading && !showError">
              <span class="title">See the common categories</span>
              <div class="aiResponse">
                <div class="tag" *ngFor="let category of _categories">
                  <span class="label">{{category.category}}</span>
                  <span class="label percent">{{category.percent}}%</span>
                </div>

              </div>
              <div class="genAiBtn" (click)="showTrends(true)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M19.4552 10.9986C19.2775 11.3894 18.7225 11.3894 18.5448 10.9986L17.4375 8.5625L15.0014 7.45518C14.6106 7.27755 14.6106 6.72245 15.0014 6.54482L17.4375 5.4375L18.5448 3.0014C18.7225 2.61061 19.2775 2.6106 19.4552 3.0014L20.5625 5.4375L22.9986 6.54482C23.3894 6.72245 23.3894 7.27755 22.9986 7.45518L20.5625 8.5625L19.4552 10.9986Z" fill="white"/>
                  <path d="M9.45518 19.9986C9.27755 20.3894 8.72245 20.3894 8.54482 19.9986L6.5 15.5L2.0014 13.4552C1.61061 13.2775 1.61061 12.7225 2.0014 12.5448L6.5 10.5L8.54482 6.0014C8.72245 5.61061 9.27755 5.61061 9.45518 6.0014L11.5 10.5L15.9986 12.5448C16.3894 12.7225 16.3894 13.2775 15.9986 13.4552L11.5 15.5L9.45518 19.9986Z" fill="white"/>
                </svg>
                <span class="label">Generate Trends</span>
              </div>
            </div>

            <div class="aiResponse"*ngIf="_showTrends && _trends.length && !_aiLoading && !showError">
              <span class="title">Monthly trends</span>
              <div class="aiResponse">
                <div class="tag" *ngFor="let trend of _trends">
                  <span class="label">{{trend.categoryName}}</span>
                  <i *ngIf="!trend.negative" class="trend icon-progress" style="color: '#00a784'"></i>
                  <i *ngIf="trend.negative" class="trend icon-regression" style="color: '#db1f26'"></i>
                  <span class="label percent" [ngStyle]="{'color': trend.negative ? '#db1f26' : '#00a784'}">{{trend.changePercent}}%</span>
                </div>
              </div>
              <a class="link" hfre="#" (click)="showTrends(false)">Hide Trends</a>
            </div>
            <div class="error" *ngIf="showError">
              <span>Error analyzing data...</span>
              <a hfre="#" (click)="handleError()">Try Again</a>
            </div>

          </div>
        </div>
      </div>
    </k-area-blocker>
  </div>
</div>
