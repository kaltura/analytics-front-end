<div #reportToExport data-aid="report-group-user-ep" class="kMain">
  <k-area-blocker [showLoader]="_loadingEvent" [message]="_blockerMessage">
    <div class="kReportView">
      <div class="kReport kContent kOverrideFAIcons">
        <div class="kReportHeader" [class.noTitle]="!_viewConfig.title">
          <h1 *ngIf="_viewConfig.title" class="kTitle kTruncateTitle"
              [kTooltip]="_userName" [showOnEllipsis]="true"
              [placement]="'bottom'">{{ _userName }}</h1>
          <div class="kHeaderRight" [class.noTitle]="!_viewConfig.title" [class.exporting]="_exporting">
            <app-pdf-export *ngIf="_viewConfig.download"
                            [eventName]="'Events_event_pdf_download'"
                            [feature]="'Event'"
                            [elementToExport]="reportToExport" [filename]="exportFilename"
                            (preExport)="preExportHandler()" (postExport)="postExportHandler()"
                            (exporting)="onExporting($event)"></app-pdf-export>

          </div>
        </div>

        <div [class.kHidden]="!_eventLoaded || !_viewConfig.eventInteractivity" class="kReportContainer">
          <div class="kColumnsWide">
            <app-metrics-cards #metrics  [virtualEventLoaded]="_eventLoaded"
                                         [exporting]="_exporting"
                                         [eventIn]="_eventId"
                                         [userId]="_userId"
                                         [startDate]="_eventStartDate"
                                         [endDate]="_eventEndDate">
            </app-metrics-cards>
            <app-event-interactivity   [_isBusy]="metrics._isBusy"
                                       [exporting]="_exporting"
                                       [_downloadCount]="metrics._downloadCount"
                                       [_messagesCount]="metrics._messagesCount"
                                       [_pollsCount]="metrics._pollsCount"
                                       [_questionsCount]="metrics._questionsCount"
                                       [_reactionsCount]="metrics._reactionsCount">
            </app-event-interactivity>
          </div>
          <div class="kColumnsNarrow">
            <app-event-user-details    [virtualEventLoaded]="_eventLoaded"
                                       [exporting]="_exporting"
                                       [eventIn]="_eventId"
                                       [userId]="_userId"
                                       [startDate]="_eventStartDate"
                                       [endDate]="_eventEndDate">
            </app-event-user-details>
            <app-other-events          [virtualEventLoaded]="_eventLoaded"
                                       [exporting]="_exporting"
                                       [eventIn]="_eventId"
                                       [userId]="_userId"
                                       [startDate]="_eventStartDate"
                                       [endDate]="_eventEndDate">
            </app-other-events>
          </div>
        </div>

      </div>
    </div>
  </k-area-blocker>
</div>

