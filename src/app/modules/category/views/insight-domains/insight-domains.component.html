<div data-aid="insight-top-domains" class="kReport kMini kOverrideFAIcons">
  <div class="kFilters">
    <span class="kTitle">{{'app.contributors.insights' | translate}}</span>
    <a (click)="scrollTo('#top-domains')" class="kDetails">{{'app.common.details' | translate}}</a>
  </div>

  <k-area-blocker [message]="_blockerMessage" [showLoader]="_isBusy">
    <div *ngIf="!_isCompareMode" class="kReportContent">

      <div class="kReportRow">
        <div *ngIf="_topSourceLabel" class="kDomainIcon" #holder>
          <img [src]="'http://' + _topSourceLabel + '/favicon.ico'"
               onError="this.onerror=null;this.style.display='none'"
               (error)="holder.classList.add('kIconfile-small')">
        </div>
        <div class="kColumns">
          <a class="topDomain" [href]="'http://' + _topSourceLabel" target="_blank" [kTooltip]="_topSourceLabel" [showOnEllipsis]="true">{{_topSourceLabel}}</a>
          <span class="kDomain">{{'app.user.popularDomain' | translate}}</span>
        </div>
      </div>

      <div class="kReportRow">
        <app-insights-bullet [values]="_bulletValues"></app-insights-bullet>
      </div>

      <div class="kReportRow kNoResults" *ngIf="!_isBusy && !_bulletValues[0]">
        {{'app.common.noResults' | translate}}
      </div>
    </div>

    <div *ngIf="_isCompareMode && _bulletValues[0]" class="kReportContent kCompare">
      <span class="kHeader">{{'app.user.popularDomain' | translate}}</span>
      <!-- Compare -->

      <span class="kPeriod">{{_compareDates}}</span>

      <div class="kReportRow">
        <div *ngIf="_compareTopSourceLabel" class="kDomainIcon" #holder>
          <img [src]="'http://' + _compareTopSourceLabel + '/favicon.ico'"
               onError="this.onerror=null;this.style.display='none'"
               (error)="holder.classList.add('kIconfile-small')">
        </div>
        <div class="kColumns">
          <a class="topDomain" [href]="'http://' + _compareTopSourceLabel" target="_blank">{{_compareTopSourceLabel}}</a>
          <!--span class="kDomain">{{'app.user.popularDomain' | translate}}</span-->
        </div>
      </div>

      <div class="kReportRow" style="margin-top: 2px">
        <app-insights-bullet [values]="_compareBulletValues" [showLegend]="false"></app-insights-bullet>
      </div>

      <div class="kReportRow" *ngIf="!_isBusy && !_compareBulletValues[0]">
        {{'app.common.noResults' | translate}}
      </div>

      <!-- Current -->
      <span class="kPeriod">{{_currentDates}}</span>

      <div class="kReportRow">
        <div *ngIf="_topSourceLabel" class="kDomainIcon" #holder>
          <img [src]="'http://' + _topSourceLabel + '/favicon.ico'"
               onError="this.onerror=null;this.style.display='none'"
               (error)="holder.classList.add('kIconfile-small')">
        </div>
        <div class="kColumns">
          <a class="topDomain" [href]="'http://' + _topSourceLabel" target="_blank">{{_topSourceLabel}}</a>
          <!--span class="kDomain">{{'app.user.popularDomain' | translate}}</span-->
        </div>
      </div>

      <div class="kReportRow" style="margin-top: 2px">
        <app-insights-bullet [values]="_bulletValues"
                             [showLegend]="false"
                             (appliedColors)="_updateColors($event)"></app-insights-bullet>
      </div>

      <div class="kReportRow">
        <div class="kLegend">
          <div class="kLegendItem">
            <div class="kCircle" [style.background-color]="_colors[0]"></div>
            <span>{{'app.category.topDomains' | translate}}</span>
          </div>
          <div class="kLegendItem">
            <div class="kCircle" [style.background-color]="_colors[1]"></div>
            <span>{{'app.category.otherDomains' | translate}}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="kReportRow kNoResults" *ngIf="!_isBusy && !_bulletValues[0]">
      {{'app.common.noResults' | translate}}
    </div>
  </k-area-blocker>
</div>

