<ng-container *ngIf="_showComponent">

  <ng-container *ngIf="!_singleMode">
    <div class="kExport" #toggle>
      <div role="button" [attr.tabindex]="_opened ? 0 : -1" class="kDropDown">
        <span>{{'app.common.exportCsv' | translate}}</span>
        <i *ngIf="!_opened" class="kIcondropdown_arrow_bottom"></i>
        <i *ngIf="_opened" class="kIcondropdown_arrow_top"></i>
      </div>
    </div>

    <kPopupWidget #popupWidgetComponent
                  [attr.data-aid]="'export-csv-' + name"
                  [popupWidth]="width"
                  [closeBtn]="false"
                  [targetRef]="toggle"
                  [targetOffset]="{'x': width * -1 + 100, 'y': 42}"
                  (onOpen)="_onPopupOpen()"
                  (onClose)="_onPopupClose()">
      <ng-template>
        <div class="kExportPanel">
          <p-tree selectionMode="checkbox"
                  [value]="_options"
                  [(selection)]="_selected"></p-tree>

          <button pButton
                  tabindex="0"
                  class="kButtonBranded kExportBtn"
                  [class.kButtonProcess]="_exportingCsv"
                  [label]="(_exportingCsv ? 'app.common.exporting' : 'app.common.exportReports') | translate"
                  (click)="_export()"
                  (keydown.enter)="_export()"></button>
        </div>
      </ng-template>
    </kPopupWidget>
  </ng-container>

  <ng-container *ngIf="_singleMode">
    <div class="kExport">
      <button pButton class="kButtonDefault kExportBtn" icon="icon-export"
              [class.kButtonProcess]="_exportingCsv"
              [disabled]="_exportingCsv"
              [label]="(_exportingCsv ? 'app.common.exporting' : 'app.common.exportCsv') | translate"
              (click)="_export()"
              (keydown.enter)="_export()"></button>
    </div>
  </ng-container>

</ng-container>
